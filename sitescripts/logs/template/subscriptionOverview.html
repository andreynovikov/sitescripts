<!-- This Source Code is subject to the terms of the Mozilla Public License
   - version 2.0 (the "License"). You can obtain a copy of the License at
   - http://mozilla.org/MPL/2.0/. -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="static/subscriptions.css" />
    <title>Overview for filter subscription {{fileName}}</title>
  </head>

  <body style="margin-top: 0px">
    <a name="top">&nbsp;</a>
    <table class="block" width="100%">
      <tr>
        <td class="title" width="250">Overview for subscription:</td>
        <td>easylist-downloads.adblockplus.org/{{fileName}}</td>
      </tr>
      <tr>
        <td class="title" width="250">Last update:</td>
        <td>{{now|formattime}}</td>
      </tr>
    </table>

    <div class="block_title">Monthly history</div>
    <div class="block">
      <table align="center" style="margin-bottom: 20px;">
        <tr align="bottom">
          {%- set maxHits, maxBandwidth = month|max(attribute='hits'), month|max(attribute='bandwidth') %}
          {%- set totalHits = month|sum(attribute='hits') %}
          {%- set totalBandwidth = month|sum(attribute='bandwidth') %}
          {%- for info in month %}
          <td align="center" style="vertical-align: bottom;">
            <div class="hitsChart vertical" title="Hits: {{info.hits}}" style="height: {{(info.hits / maxHits * 100)|round(method='ceil')|int}}px;"></div>
            {{- '' -}}
            <div class="bandwidthChart vertical" title="Bandwidth: {{info.bandwidth|bytes}}" style="height: {{(info.bandwidth / maxBandwidth * 100)|round(method='ceil')|int}}px;"></div>
          </td>
          {%- endfor %}
        </tr>
        <tr>
          {%- for info in month %}
          <td align="center">
            <a href="{{info.url}}">{{info.id|monthname[0:3]}}<br />{{info.id|monthname[4:]}}</a>
          </td>
          {%- endfor %}
        </tr>
      </table>

      <table align="center">
        <tr>
          <th bgcolor="#ECECEC">Month</th>
          <th bgcolor="#66DDEE" colspan="2">Hits</th>
          <th bgcolor="#2EA495">Bandwidth</th>
        </tr>
        {%- for info in month %}
        <tr>
          <td><a href="{{info.url}}">{{info.id|monthname}}</a></td>
          <td align="right">{{info.hits}}</td>
          <td align="right">{{(info.hits / totalHits * 100)|round(precision=1)}}%</td>
          <td align="right">{{info.bandwidth|bytes}}</td>
        </tr>
        {%- endfor %}
        <tr class="special">
          <td style="font-weight: bold">Total</td>
          <td align="right">{{totalHits}}</td>
          <td align="right">&nbsp;</td>
          <td align="right">{{totalBandwidth|bytes}}</td>
        </tr>
      </table>
    </div>
  </body>
</html>
